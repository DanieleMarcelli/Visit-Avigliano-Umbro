
<html lang="it" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Il Cammino del Lago Tiberino - Visit Avigliano Umbro</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PapaParse per leggere il Google Sheet -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#050b14', 
                            navy: '#0f172a', 
                            gold: '#d4af37', 
                            cyan: '#06b6d4', 
                            text: '#94a3b8', 
                            white: '#f8fafc',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    backgroundImage: {
                        'hero-gradient': 'linear-gradient(to right, #050b14 0%, #050b14 30%, rgba(5,11,20,0.6) 100%)',
                    }
                }
            }
        }
    </script>
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .timeline-line {
            position: absolute;
            left: 11px;
            top: 10px;
            bottom: 0;
            width: 1px;
            background-color: #334155; 
            z-index: 0;
        }
        .step-circle {
            z-index: 10;
        }
        .gps-glow {
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
        }
        /* Overlay gradiente per le immagini delle card */
        .card-image-overlay {
            background: linear-gradient(to bottom, rgba(15, 23, 42, 0.2), rgba(15, 23, 42, 0.9));
        }
    </style>
</head>
<body class="bg-brand-dark text-brand-text font-sans flex flex-col min-h-screen selection:bg-brand-gold selection:text-brand-dark">

    <!-- HEADER -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-brand-dark/90 backdrop-blur-md border-b border-white/5 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="index.html" class="flex items-center gap-3 group">
                    <div class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center text-brand-gold overflow-hidden border border-white/10 group-hover:border-brand-gold transition-colors">
                        <i data-lucide="mountain" class="w-5 h-5"></i>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-[10px] uppercase tracking-[0.2em] text-brand-gold font-bold">Portale Turistico</span>
                        <span class="text-xl font-bold font-serif leading-none text-white">Visit Avigliano</span>
                    </div>
                </a>

                <nav class="hidden md:flex items-center gap-8">
                    <a href="#" class="text-brand-text hover:text-white text-xs font-bold uppercase tracking-widest transition-colors">Il Lago</a>
                    <a href="#" class="text-brand-text hover:text-white text-xs font-bold uppercase tracking-widest transition-colors">Borghi</a>
                    <a href="#" class="text-brand-text hover:text-white text-xs font-bold uppercase tracking-widest transition-colors">Eventi</a>
                    <a href="#" class="text-brand-gold border border-brand-gold/30 px-5 py-2 rounded-full hover:bg-brand-gold hover:text-brand-dark transition-all text-xs font-bold uppercase tracking-widest">Il Cammino</a>
                </nav>
                
                <button class="md:hidden text-white">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- HERO SECTION -->
    <div class="relative min-h-[85vh] flex items-center pt-20 overflow-hidden">
        <!-- Background Image -->
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1516972087570-5b7194f1c9c0?q=80&w=2070" 
                 class="w-full h-full object-cover opacity-30 transform scale-105 motion-safe:animate-pulse-slow">
            <div class="absolute inset-0 bg-hero-gradient"></div>
        </div>

        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            
            <!-- Left Content -->
            <div class="space-y-8">
                <div class="flex items-center gap-4">
                    <div class="h-[1px] w-12 bg-brand-gold"></div>
                    <span class="text-brand-gold text-xs font-bold tracking-[0.2em] uppercase">Unicum Geologico</span>
                </div>
                
                <h1 class="text-5xl md:text-7xl font-serif font-bold text-white leading-[1.1]">
                    Il Segreto del <br>
                    <span class="italic text-brand-gold/90">Lago Tiberino</span>
                </h1>
                
                <p class="text-lg text-brand-text font-light max-w-xl leading-relaxed">
                    Tre milioni di anni fa, queste valli erano un antico bacino lacustre. Oggi puoi camminare su conchiglie fossili e ammirare la Foresta Pietrificata di Dunarobba, testimone silenziosa di un'era geologica dimenticata.
                </p>

                <!-- Stats Row -->
                <div class="grid grid-cols-3 gap-8 pt-8 border-t border-white/10">
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <i data-lucide="footprints" class="w-4 h-4 text-brand-gold"></i>
                            <span class="text-xs uppercase tracking-wider text-brand-text">Lunghezza</span>
                        </div>
                        <span class="text-3xl font-serif text-white">81 <span class="text-lg font-sans font-light text-brand-text">km</span></span>
                    </div>
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <i data-lucide="mountain" class="w-4 h-4 text-brand-gold"></i>
                            <span class="text-xs uppercase tracking-wider text-brand-text">Dislivello</span>
                        </div>
                        <span class="text-3xl font-serif text-white">+2.2k <span class="text-lg font-sans font-light text-brand-text">m</span></span>
                    </div>
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <i data-lucide="calendar" class="w-4 h-4 text-brand-gold"></i>
                            <span class="text-xs uppercase tracking-wider text-brand-text">Durata</span>
                        </div>
                        <span id="days-display-hero" class="text-3xl font-serif text-white">3-4 <span class="text-lg font-sans font-light text-brand-text">gg</span></span>
                    </div>
                </div>
            </div>

            <!-- Right Visual (Map Silhouette) -->
            <div class="relative hidden lg:flex justify-center items-center h-full min-h-[500px]">
                <img src="https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1?q=80&w=800" class="absolute inset-0 w-full h-full object-cover rounded-3xl opacity-10 mix-blend-overlay">
                
                <!-- Abstract Map Representation -->
                <svg viewBox="0 0 200 400" class="w-full max-w-sm h-auto relative z-10 drop-shadow-2xl opacity-90" style="filter: drop-shadow(0 0 25px rgba(212, 175, 55, 0.15));">
                    <path d="M60,20 C70,10 90,5 100,20 C110,35 120,80 110,100 C100,120 90,140 120,160 C140,175 160,200 150,230 C140,260 160,300 150,350 C140,380 120,390 100,380 C80,370 60,350 70,300 C80,250 50,220 40,200 C30,180 50,150 70,120 C80,90 50,40 60,20 Z" 
                          fill="none" stroke="#d4af37" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                     <circle cx="90" cy="320" r="3" fill="#06b6d4" class="animate-pulse">
                         <animate attributeName="r" values="3;6;3" dur="2s" repeatCount="indefinite" />
                         <animate attributeName="opacity" values="1;0.5;1" dur="2s" repeatCount="indefinite" />
                    </circle>
                </svg>

                <div class="absolute bottom-20 right-10">
                    <button class="bg-brand-navy border border-brand-cyan/30 text-brand-cyan px-6 py-3 rounded-lg text-xs font-bold uppercase tracking-widest flex items-center gap-3 hover:bg-brand-cyan/10 transition-all gps-glow">
                        <div class="w-2 h-2 bg-brand-cyan rounded-full animate-ping"></div>
                        Mappa Live
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 w-full relative z-10">
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-16 items-start">
            
            <!-- COLONNA SINISTRA -->
            <div class="lg:col-span-2 space-y-20">
                
                <!-- Intro Storica -->
                <section>
                    <h2 class="text-3xl font-serif text-white mb-8 border-l-4 border-brand-gold pl-6">
                        Una Storia lunga <span class="text-brand-gold">2 Milioni di Anni</span>
                    </h2>
                    <div class="prose prose-invert prose-lg max-w-none text-brand-text font-light">
                        <p>
                            La valle umbra del Tevere ospitava un vasto lago salato, il <span class="text-white font-medium">Lago Tiberino</span>. Studi dell'Università di Perugia confermano che questo antico bacino ha modellato l'attuale conformazione del territorio.
                        </p>
                    </div>
                </section>

                <!-- Punti di Interesse (Con Immagini) -->
                <section>
                    <div class="flex items-center justify-between mb-8">
                        <h3 class="text-2xl font-serif text-white">Cosa Vedrai</h3>
                        <div class="h-[1px] bg-white/10 flex-grow ml-6"></div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Card 1 -->
                        <div class="group relative bg-brand-navy rounded-xl overflow-hidden h-64 border border-white/5 hover:border-brand-gold/50 transition-all">
                            <img src="https://images.unsplash.com/photo-1448375240586-dfd8d3f208ce?q=80&w=800" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            <div class="absolute inset-0 card-image-overlay"></div>
                            <div class="absolute bottom-0 left-0 p-6 z-10">
                                <div class="w-8 h-8 bg-brand-gold/90 rounded flex items-center justify-center text-brand-dark mb-3">
                                    <i data-lucide="trees" class="w-4 h-4"></i>
                                </div>
                                <h4 class="text-lg font-serif text-white mb-1">Foresta Fossile</h4>
                                <p class="text-xs text-brand-text/90 leading-relaxed">Tronchi fossili di Dunarobba, unici al mondo.</p>
                            </div>
                        </div>

                        <!-- Card 2 -->
                        <div class="group relative bg-brand-navy rounded-xl overflow-hidden h-64 border border-white/5 hover:border-brand-gold/50 transition-all">
                            <img src="https://images.unsplash.com/photo-1519810755548-39211615a025?q=80&w=800" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            <div class="absolute inset-0 card-image-overlay"></div>
                            <div class="absolute bottom-0 left-0 p-6 z-10">
                                <div class="w-8 h-8 bg-brand-gold/90 rounded flex items-center justify-center text-brand-dark mb-3">
                                    <i data-lucide="castle" class="w-4 h-4"></i>
                                </div>
                                <h4 class="text-lg font-serif text-white mb-1">Castelli e Borghi</h4>
                                <p class="text-xs text-brand-text/90 leading-relaxed">Da Sismano a Forte Cesare, sentinelle di pietra.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Tappe Section (Dinamica) -->
                <section>
                    <div class="flex items-center justify-between mb-8">
                        <h3 class="text-2xl font-serif text-white">Itinerario e Tappe</h3>
                        <div id="loading-indicator" class="hidden text-brand-cyan text-xs font-bold animate-pulse">Caricamento da Sheet...</div>
                    </div>
                    
                    <div class="relative pl-4">
                        <div class="timeline-line"></div>
                        <div id="timeline-container" class="space-y-10 relative z-10">
                            <!-- Populated via JS -->
                            <p class="text-brand-text/50 italic pl-10">Seleziona una durata per vedere le tappe...</p>
                        </div>
                    </div>
                </section>

            </div>

            <!-- COLONNA DESTRA (Sidebar Sticky) -->
            <div class="lg:col-span-1 relative h-full">
                <div class="sticky top-28 space-y-8">
                    
                    <!-- Configurator Card -->
                    <div class="bg-brand-navy rounded-2xl border border-white/10 overflow-hidden shadow-2xl">
                        <div class="bg-white/5 p-6 border-b border-white/5">
                            <h3 class="font-serif font-bold text-xl text-white">Configura Viaggio</h3>
                        </div>
                        
                        <div class="p-6 space-y-8">
                            <!-- Duration Selector -->
                            <div>
                                <label class="block text-xs font-bold text-brand-gold uppercase tracking-widest mb-4">Giorni a Disposizione</label>
                                <div class="relative">
                                    <select id="duration-select" class="w-full p-4 bg-brand-dark border border-white/10 rounded-lg text-white focus:border-brand-gold outline-none text-sm appearance-none cursor-pointer hover:bg-white/5 transition-colors" onchange="filterStages()">
                                        <option value="3" selected>Classico (3 Giorni)</option>
                                        <option value="4">Relax (4 Giorni)</option>
                                    </select>
                                    <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-text pointer-events-none"></i>
                                </div>
                            </div>

                            <hr class="border-white/10">

                            <!-- Request Form -->
                            <div class="space-y-4">
                                <p class="text-sm font-bold text-white flex items-center gap-2">
                                    Richiedi Credenziale
                                </p>
                                <input type="text" placeholder="Nome e Cognome" class="w-full p-3 bg-brand-dark border border-white/10 rounded-lg text-sm text-white focus:border-brand-gold outline-none transition-colors">
                                <input type="email" placeholder="La tua Email" class="w-full p-3 bg-brand-dark border border-white/10 rounded-lg text-sm text-white focus:border-brand-gold outline-none transition-colors">
                            </div>

                            <button class="w-full bg-brand-gold text-brand-dark font-bold py-4 rounded-lg shadow-lg hover:bg-white transition-all uppercase tracking-widest text-xs">
                                Invia Richiesta
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-black text-brand-text py-16 border-t border-white/5 mt-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
             <span class="text-brand-gold font-bold uppercase tracking-widest text-xs">Avigliano nel Cuore</span>
             <p class="mt-4 text-sm font-light">Progetto di valorizzazione territoriale.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        lucide.createIcons();

        // URL del tuo Google Sheet (CSV Pubblicato)
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQIXJyYXgON5vC3u4ri0duZ3MMue3ZeqfvU_j52iVmJMpWfzuzedidIob5KyTw71baMKZXNgTCiaYce/pub?gid=663441141&single=true&output=csv';
        
        let allStages = [];

        // Fetch Data on Load
        window.onload = function() {
            const loading = document.getElementById('loading-indicator');
            loading.classList.remove('hidden');

            Papa.parse(SHEET_URL, {
                download: true,
                header: true,
                complete: function(results) {
                    allStages = results.data;
                    console.log("Dati caricati:", allStages);
                    loading.classList.add('hidden');
                    filterStages(); // Initial render
                },
                error: function(err) {
                    console.error("Errore CSV:", err);
                    document.getElementById('timeline-container').innerHTML = '<p class="text-red-400 pl-10">Errore nel caricamento dei dati.</p>';
                }
            });
        };

        function filterStages() {
            const days = document.getElementById('duration-select').value;
            const container = document.getElementById('timeline-container');
            
            // Filtra e Ordina
            const filtered = allStages
                .filter(s => s.giorni === days)
                .sort((a, b) => parseInt(a.ordine) - parseInt(b.ordine));

            document.getElementById('days-display-hero').innerHTML = `${days} <span class="text-lg font-sans font-light text-brand-text">gg</span>`;

            if (filtered.length === 0) {
                container.innerHTML = '<p class="text-brand-text/50 pl-10">Nessuna tappa trovata per questa selezione.</p>';
                return;
            }

            let html = '';
            filtered.forEach((stage) => {
                html += `
                <div class="relative pl-10 group cursor-default animate-fade-in-up">
                    <!-- Dot -->
                    <div class="absolute left-[-4px] top-0 w-3 h-3 rounded-full bg-brand-dark border border-brand-text group-hover:border-brand-gold group-hover:bg-brand-gold transition-colors z-10"></div>
                    
                    <!-- Content -->
                    <div class="pb-2 border-b border-white/5 hover:border-white/20 transition-colors">
                        <div class="flex flex-col md:flex-row md:justify-between md:items-baseline mb-2">
                            <h4 class="font-serif text-xl text-white group-hover:text-brand-gold transition-colors">
                                <span class="text-xs font-sans text-brand-gold/50 font-bold uppercase tracking-widest mr-2">Tappa 0${stage.ordine}</span>
                                ${stage.titolo}
                            </h4>
                            <div class="text-xs font-bold uppercase tracking-wider text-brand-text mt-1 md:mt-0">
                                ${stage.km} <span class="text-brand-gold mx-1">•</span> ${stage.difficolta}
                            </div>
                        </div>
                        <p class="text-brand-text/80 text-sm font-light leading-relaxed">${stage.descrizione}</p>
                    </div>
                </div>
                `;
            });

            container.innerHTML = html;
        }
    </script>
</body>
</html>

        function selectMode(btn, mode) {
            document.querySelectorAll('.mode-btn').forEach(b => {
                b.classList.remove('active', 'bg-brand-gold/10', 'text-brand-gold', 'border-brand-gold');
                b.classList.add('text-brand-text', 'border-white/10');
            });

            btn.classList.remove('text-brand-text', 'border-white/10');
            btn.classList.add('active', 'bg-brand-gold/10', 'text-brand-gold', 'border-brand-gold');
            
            updateTimeline();
        }

        function updateTimeline() {
            const days = document.getElementById('duration-select').value;
            const container = document.getElementById('timeline-container');
            const stages = stagesData[days];
            
            document.getElementById('days-display-hero').innerHTML = `${days} <span class="text-lg font-sans font-light text-brand-text">gg</span>`;

            let html = '';
            stages.forEach((stage, index) => {
                html += `
                <div class="relative pl-10 group cursor-default">
                    <!-- Dot -->
                    <div class="absolute left-[-4px] top-0 w-3 h-3 rounded-full bg-brand-dark border border-brand-text group-hover:border-brand-gold group-hover:bg-brand-gold transition-colors z-10"></div>
                    
                    <!-- Content -->
                    <div class="pb-2 border-b border-white/5 hover:border-white/20 transition-colors">
                        <div class="flex flex-col md:flex-row md:justify-between md:items-baseline mb-2">
                            <h4 class="font-serif text-xl text-white group-hover:text-brand-gold transition-colors">
                                <span class="text-xs font-sans text-brand-gold/50 font-bold uppercase tracking-widest mr-2">Tappa 0${index + 1}</span>
                                ${stage.title}
                            </h4>
                            <div class="text-xs font-bold uppercase tracking-wider text-brand-text mt-1 md:mt-0">
                                ${stage.km} <span class="text-brand-gold mx-1">•</span> ${stage.diff}
                            </div>
                        </div>
                        <p class="text-brand-text/80 text-sm font-light leading-relaxed">${stage.desc}</p>
                    </div>
                </div>
                `;
            });

            container.innerHTML = html;
        }

        window.onload = function() {
            updateTimeline();
        };

    </script>
</body>
</html>
